import{j as e,r as u,a as F,d as V,y as Q}from"./app-DA6yD-bg.js";import{B as w}from"./button-Czat_LeM.js";import{I as $}from"./input-BMchtnkz.js";import{R as T,a as z}from"./radio-group-ao2XUvb9.js";import{d as D}from"./index-CNbTJdn3.js";import{u as R}from"./index-DlhB-auK.js";import{p as G}from"./index-DTzn02tC.js";import{F as _}from"./index.es-C4Hz4JyV.js";import{l as B}from"./logo-teamster-DKsO-BHU.js";import"./utils-Baa09YAL.js";import"./index-BSvPNBtZ.js";import"./index-wyKmaqcT.js";import"./index-DjDCE-CF.js";import"./index-D2R9fagv.js";import"./index-gIoNW1Kd.js";import"./index-DKKbawXw.js";import"./circle-DvhWujGC.js";import"./createLucideIcon-TB6UWrdR.js";import"./index-0yB0lKw6.js";const M=({onNext:x})=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Questionário de interesses"}),e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"bg-white p-8 mb-8 rounded-lg drop-shadow-md",children:[e.jsx("p",{className:"mb-4",children:"Caro utilizador, "}),e.jsx("p",{className:"mb-4",children:"O Teamster é uma aplicação de teambuilding que utiliza Inteligência Artificial para oferecer atividades personalizadas. Solicitamos o preenchimento de um questionário sobre os seus interesses para personalizar a sua experiência. O questionário varia em duração: mínimo de 1 minuto, média entre 3 a 5 minutos, e completo de 6 a 8 minutos."}),e.jsx("p",{className:"mb-4",children:"Por favor note que a precisão das atividades recomendadas é proporcional à quantidade de perguntas respondidas. Garantimos a anonimização das suas respostas para proteger a sua privacidade."})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(w,{className:"px-6",onClick:x,children:"Prosseguir"})})]})]}),L=({onNext:x,onPrev:l,id:f})=>{const[n,c]=u.useState("");console.log("id:",f);const o=async()=>{if(!g()){console.error("Form is not valid");return}if(!f){console.error("ID is undefined");return}try{const i=await F.post(`/api/v1/saveParticipantsInfo/${f}`,{name:n.trim()});console.log("Name saved:",i.data),x()}catch(i){console.error("Failed to save name:",i)}},g=()=>n.trim()!=="";return e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Questionário de interesses"}),e.jsxs("div",{className:"p-8 w-full max-w-2xl",children:[e.jsx("div",{className:"flex flex-col gap-8 mb-20",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm mb-2",children:"Nome"}),e.jsx($,{variant:"activity",type:"text",className:"mt-1 p-2 w-full border rounded",value:n,onChange:i=>c(i.target.value)})]})}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(w,{variant:"outline",className:"px-6",onClick:l,children:"Voltar"}),e.jsx(w,{className:"px-6",onClick:o,disabled:!g(),children:"Prosseguir"})]})]})]})},U=({onNext:x,onPrev:l,onComplete:f,id:n})=>{const c=[{id:1,question:"Como te sentes em relação a atividades físicas e desporto?",options:["Muito confortável","Confortável","Indiferente","Nada Confortável"],optionsLabel:["Sente-se muito confortável com atividade fisica e desporto","Sente-se confortável com atividade fisica e desporto","Sente-se indiferente com atividade fisica e desporto","Não se sente nada confortável com atividade fisica e desporto"]},{id:2,question:"Tens alguma restrição alimentar ou alergia de que precisamos estar cientes? Se sim, por favor, especifica",label:"Restrições alimentares",options:[]},{id:3,question:"Gostas de nadar?",options:["Gosto de nadar e sinto-me confortável em águas profundas","Gosto de nadar onde tenho pé","Não gosto de nadar"],optionsLabel:["Gosto de nadar e sinto-me confortável em águas profundas","Gosto de nadar onde tenho pé","Não gosto de nadar"]},{id:4,question:"Qual é o teu nível de conforto em atividades ao ar livre (caminhadas, acampamentos, etc.)?",options:["Muito confortável","Confortável","Indiferente","Nada Confortável"],optionsLabel:["Sente-se muito confortável com atividade ao ar livre","Sente-se confortável com atividade ao ar livre","Sente-se indiferente com atividade ao ar livre","Não se sente nada confortável com atividade ao ar livre"]},{id:5,question:"Tens alguma condição de saúde ou lesão permanente que possa afetar a tua participação em alguma atividade?",label:"Condições de saúde",options:[]}],[o,g]=u.useState({}),[i,C]=u.useState(!1),h=d=>{const r=[];for(let j=0;j<c.length;j++){const N=c[j],v=N.id,S=o[v];if(S)if(N.options.length){const t=N.options.indexOf(S);r.push(N.optionsLabel[t])}else r.push(N.label+": "+S);else r.push(null)}y(r,n,d)},y=(d,r,j)=>{const N={restrictions:JSON.stringify(d),participant_id:r,is_complete:j};if(d.length!==c.length){console.error("Restrictions answers are not enough");return}axios.post(`/api/v1/saveRestrictions/${r}`,N).then(v=>{console.log("API response:",v.data),v.data.message==="Restrictions updated successfully!"?(console.log("Restrictions updated successfully"),i?f():x()):v.data.message==="Restrictions finished successfully!"?(console.log("inertia redirect"),D.Inertia.visit("/participant")):console.error("Failed to update traits",v.data)}).catch(v=>{var S,t,s;console.error("Error response:",(S=v.response)==null?void 0:S.data),console.error("Error status:",(t=v.response)==null?void 0:t.status),console.error("Error headers:",(s=v.response)==null?void 0:s.headers)})},A=(d,r)=>{g({...o,[d]:r}),console.log(o)},k=()=>Object.keys(o).length===c.length&&Object.values(o).every(d=>d!==""),O=()=>{C(!0),h(!0)},I=()=>{h(!1)};return e.jsxs("div",{className:"p-8 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Questionário de interesses"}),c.map(d=>e.jsxs("div",{className:"mb-8 bg-white p-8 rounded-lg drop-shadow-md",children:[e.jsx("label",{className:"block text-lg mb-4",children:d.question}),d.options.length>0?e.jsx(T,{onValueChange:r=>A(d.id,r),children:d.options.map((r,j)=>e.jsxs("label",{className:"flex items-center mb-2",children:[e.jsx(z,{value:r}),e.jsx("span",{className:"ml-2",children:r})]},j))}):e.jsx("textarea",{className:"w-full p-2 border rounded",onChange:r=>A(d.id,r.target.value),rows:"4"})]},d.id)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(w,{variant:"outline",className:"px-6",onClick:l,children:"Voltar"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(w,{className:"px-6",onClick:()=>I(),disabled:!k(),children:"Continuar Questionário"}),k()?e.jsx(w,{className:"px-6",onClick:O,children:"Terminar"}):e.jsx(w,{className:"px-6",disabled:!0,children:"Terminar"})]})]})]})},H=[{id:1,question:"Que tipos de filmes te cativam mais?",options:["Drama ou romance","Ação ou aventura","Fantasia ou ficção científica","Comédia ou filmes independentes","Outros"]},{id:2,question:"Se tivesses oportunidade, que atividade gostarias de experimentar ou aprofundar?",options:["Aprender a tocar um instrumento musical","Experimentar um novo desporto ou atividade física","Participar em aulas de pintura, escultura ou outra expressão artística","Envolvimento em grupos de discussão sobre temas de interesse","Outros"]},{id:3,question:"Imagina um dia inteiramente teu; como gostarias de o passar?",options:["A devorar um livro ou a assistir a um filme no conforto da tua casa","A explorar trilhas na natureza ou a praticar desportos ao ar livre","A absorver arte numa galeria ou a participar em workshops criativos","A desfrutar de um animado almoço ou jantar na companhia de amigos","Outros"]}],J={questions:H},K=({onNext:x,onPrev:l,onComplete:f,id:n})=>{const c=J.questions,[o,g]=u.useState(!1),[i,C]=u.useState({}),{data:h,setData:y,post:A,processing:k,errors:O}=R({passions:"",hobbies:""}),[I,d]=u.useState(!1),r=(s,a)=>{C({...i,[s]:a})},j=()=>Object.keys(i).length===c.length&&Object.values(i).every(s=>s!==""),N=s=>{const a={1:0,2:0,3:0,4:0};Object.values(i).forEach(q=>{const E=c[0].options.indexOf(q)+1;a[E]++});const p=Object.keys(a).reduce((q,E)=>a[q]>a[E]?q:E);let m="",b="";switch(p){case"1":m="literatura, arte",b="ler, participar em workshops criativos";break;case"2":m="cinema, entretenimento, tecnologia",b="ver filmes, ouvir música";break;case"3":m="discussão intelectual, convivência, socialização",b="sair com amigos, conviver, viajar";break;case"4":m="desporto, natureza, aventura",b="explorar trilhas, praticar desportos";break;default:m="Não especificado",b="Não especificado";break}y({passions:m,hobbies:b,is_completed:s}),d(!0)};u.useEffect(()=>{I&&(console.log("Data after processing:",h),v())},[I]);const v=()=>{const s={passions:JSON.stringify(h.passions.split(", ")),hobbies:JSON.stringify(h.hobbies.split(", ")),is_completed:h.is_completed,participant_id:n};if(console.log("Data being sent:",s),h.passions.length===0||h.hobbies.length===0){console.error("Passions or hobbies are empty");return}F.post(`/api/v1/saveTraits/${n}`,s).then(a=>{console.log("API response:",a.data),a.data.message==="Traits updated successfully!"?(console.log("Traits updated successfully"),o?f():x()):a.data.message=="Traits finished successfully!"?D.Inertia.visit("/participant"):console.error("Failed to update traits",a.data)}).catch(a=>{var p,m,b;console.error("Error response:",(p=a.response)==null?void 0:p.data),console.error("Error status:",(m=a.response)==null?void 0:m.status),console.error("Error headers:",(b=a.response)==null?void 0:b.headers)})},S=()=>{g(!0),N(!0)},t=()=>{N(!1)};return e.jsxs("div",{className:"p-8 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Questionário de interesses"}),c.map(s=>e.jsxs("div",{className:"mb-8 bg-white p-8 rounded-lg drop-shadow-md",children:[e.jsx("label",{className:"block text-lg mb-4 font-semibold",children:s.question}),s.options.length>0?e.jsx(T,{onValueChange:a=>r(s.id,a),children:s.options.map((a,p)=>e.jsxs("label",{className:"flex items-center mb-2",children:[e.jsx(z,{value:a}),e.jsx("span",{className:"ml-2",children:a})]},p))}):e.jsx("textarea",{className:"w-full p-2 border rounded",onChange:a=>r(s.id,a.target.value),rows:"4"})]},s.id)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(w,{variant:"outline",className:"px-6",onClick:l,children:"Voltar"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(w,{className:"px-6",onClick:()=>t(),disabled:!j(),children:"Continuar Questionário"}),e.jsx(w,{className:"px-6",onClick:S,disabled:!j()||k,children:"Terminar"})]})]})]})},W=[{id:1,question:"O que te fascina mais no teu ambiente profissional?",options:["Alcançar metas concretas e ver resultados palpáveis","Explorar novos conhecimentos e desafiar a mente","Expressar a tua criatividade e contribuir com ideias únicas","Cooperar com colegas e desenvolver projetos em equipa","outros"]},{id:2,question:"Como enfrentas momentos de pressão ou tensão?",options:["Prefiro momentos de solidão para refletir e recuperar a calma","Procuro apoio e conforto junto de amigos e familiares próximos","Procuro atividades criativas para canalizar o stress, como desenhar ou escrever","Recorro a exercícios físicos ou técnicas de meditação para relaxar e aliviar a tensão","outros"]},{id:3,question:"Qual é a tua dinâmica ideal em situações sociais?",options:["Opto por interações mais profundas e íntimas com um círculo restrito de pessoas","Gosto de estar rodeado de pessoas e de cultivar novas amizades","Prefiro observar e participar em conversas sobre assuntos cativantes","Não me importo em ser o centro das atenções e dinamizando a interação todos presentes","outros"]},{id:4,question:"Se pudesses viajar para um lugar específico, qual seria o destino dos teus sonhos?",options:["Uma cidade histórica enraizada em cultura e tradição","Uma praia paradisíaca com paisagens deslumbrantes e atmosfera relaxante","Um destino exótico e pouco explorado, repleto de aventuras e descobertas","Um local conhecido pela sua efervescência artística e cenário cultural vibrante","outros"]}],X={questions:W},Y=({onNext:x,onPrev:l,onComplete:f,id:n})=>{const c=X.questions,[o,g]=u.useState({}),{data:i,setData:C,post:h,processing:y,errors:A}=R({passions:"",hobbies:""}),[k,O]=u.useState(!1),[I,d]=u.useState(!1),r=(t,s)=>{g({...o,[t]:s})},j=()=>Object.keys(o).length===c.length&&Object.values(o).every(t=>t!==""),N=()=>{const t={1:0,2:0,3:0,4:0};Object.values(o).forEach(m=>{const b=c[0].options.indexOf(m)+1;t[b]++});const s=Object.keys(t).reduce((m,b)=>t[m]>t[b]?m:b);let a="",p="";switch(s){case"1":a="sossego, tranquilidade",p="reflexão, meditação";break;case"2":a="ambiente familiar, self-improvement",p="convivio";break;case"3":a="criatividade, inovação",p="desenho, pintura";break;case"4":a="amizades, relaxar",p="exercicios fisicos";break;default:a="Não especificado",p="Não especificado";break}C({passions:a,hobbies:p}),d(!0)};u.useEffect(()=>{I&&(console.log("Data after processing:",i),v())},[I]);const v=()=>{const t={passions:i.passions.split(", "),hobbies:i.hobbies.split(", "),participant_id:n};if(console.log("Data being sent:",t),i.passions.length===0||i.hobbies.length===0){console.error("Passions or hobbies are empty");return}F.post(`/api/v1/appendTraits/${n}`,t).then(s=>{console.log("API response:",s.data),s.data.message==="Traits appended successfully!"?(console.log("Traits appended successfully"),alert("Questionário Concluido com sucesso!"),f()):console.error("Failed to append traits",s.data)}).catch(s=>{var a,p,m;console.error("Error response:",(a=s.response)==null?void 0:a.data),console.error("Error status:",(p=s.response)==null?void 0:p.status),console.error("Error headers:",(m=s.response)==null?void 0:m.headers)})},S=()=>{O(!0),N()};return e.jsxs("div",{className:"p-8 w-full max-w-2xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-8",children:"Questionário de interesses"}),c.map(t=>e.jsxs("div",{className:"mb-8 bg-white p-8 rounded-lg drop-shadow-md",children:[e.jsx("label",{className:"block text-lg mb-4 font-semibold",children:t.question}),t.options.length>0?e.jsx(T,{onValueChange:s=>r(t.id,s),children:t.options.map((s,a)=>e.jsxs("label",{className:"flex items-center mb-2",children:[e.jsx(z,{value:s}),e.jsx("span",{className:"ml-2",children:s})]},a))}):e.jsx("textarea",{className:"w-full p-2 border rounded",onChange:s=>r(t.id,s.target.value),rows:"4"})]},t.id)),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(w,{variant:"outline",className:"px-6",onClick:l,children:"Voltar"}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(w,{className:"px-6",onClick:S,disabled:!j()||y,children:"Terminar"})})]})]})},P=()=>e.jsx(_,{icon:G}),Z=({step:x})=>{const l=[{label:"INTRODUÇÃO",Icon:P},{label:"INFORMAÇÕES",Icon:P},{label:"Bem-Estar e Restrições",Icon:P},{label:"Áreas de Interesse",Icon:P},{label:"O que te Motiva",Icon:P}];return e.jsxs("div",{className:"flex flex-col items-center justify-start bg-white px-8 py-4 mx-20 my-12 shadow-lg rounded-lg",style:{height:"620px"},children:[e.jsx("img",{src:B,alt:"Teamster Logo",className:"w-64 mb-8"}),e.jsxs("div",{className:"grid grid-cols-[auto_auto] gap-x-4",children:[e.jsx("div",{className:"flex flex-col items-center",children:l.map((f,n)=>{const c=f.Icon,o=n+1<x,g=n+1===x;return e.jsxs(V.Fragment,{children:[e.jsx("div",{className:`flex items-center justify-center h-12 w-12 rounded-full text-white ${o?"bg-[#56C496]":g?"bg-[#FE9DCB]":"bg-[#AAAAAA]"}`,children:e.jsx(c,{className:"text-xl h-6 w-6"})}),n<l.length-1&&e.jsx("div",{className:`w-1 h-12 ${o?"bg-[#56C496]":"bg-[#AAAAAA]"}`})]},n)})}),e.jsx("div",{className:"flex flex-col justify-start mt-6 ml-4",children:l.map((f,n)=>e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex-1 mb-16",children:e.jsx("span",{className:`text-xl font-bold font-serif uppercase ${n+1<=x?"text-black":"text-gray-500"}`,children:f.label})})},n))})]})]})},ge=x=>{const l=x.user_id;console.log(l);const[f,n]=u.useState({}),c=async y=>{try{const A=await axios.post(`api/v1/getparticipantdata/${y}`);n(A.data),console.log("Participant fetched:",A.data)}catch(A){console.error("Failed to fetch participant:",A)}};u.useEffect(()=>{c(l)},[l]);const[o,g]=u.useState(()=>{const y=localStorage.getItem("currentQuizStep");return y?parseInt(y,10):1});u.useEffect(()=>{window.scrollTo(0,0),localStorage.setItem("currentQuizStep",o)},[o]);const i=()=>{o<5?g(o+1):Q.visit("/participant")},C=()=>{o>1&&g(o-1)},h=()=>{console.log("Questionário concluído! - redirect"),Q.visit("/participant")};return e.jsxs("div",{className:"flex flex-row min-h-screen bg-[#F8F7FC]",children:[e.jsx(Z,{step:o}),e.jsxs("div",{className:"flex flex-col flex-grow mt-6 p-8 overflow-y-auto",children:[o===1&&e.jsx(M,{onNext:i}),o===2&&e.jsx(L,{onNext:i,onPrev:C,id:l}),o===3&&e.jsx(U,{id:l,onNext:i,onPrev:C,onComplete:h}),o===4&&e.jsx(K,{id:l,onNext:i,onPrev:C,onComplete:h}),o===5&&e.jsx(Y,{id:l,onNext:i,onPrev:C,onComplete:h})]})]})};export{ge as default};
