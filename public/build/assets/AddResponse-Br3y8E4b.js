import{r as o,j as e,Y as g,a as x}from"./app-DA6yD-bg.js";import{T as v,C as b,R as N}from"./Radio_cp-npa-mGGS.js";import{B as S}from"./button-Czat_LeM.js";import{t as d}from"./use-toast-DSZ2X8Ft.js";import{Layout as w}from"./Layout-CD6lmAmp.js";import{d as C}from"./index-CNbTJdn3.js";import"./index.es-C4Hz4JyV.js";import"./index-0yB0lKw6.js";import"./index-DTzn02tC.js";import"./label-DJGv7VYA.js";import"./index-BSvPNBtZ.js";import"./utils-Baa09YAL.js";import"./input-BMchtnkz.js";import"./checkbox-DteTE1QY.js";import"./index-wyKmaqcT.js";import"./index-DjDCE-CF.js";import"./index-DUFVU-Ky.js";import"./index-gIoNW1Kd.js";import"./index-DgaNj54m.js";import"./createLucideIcon-TB6UWrdR.js";import"./index-DKKbawXw.js";import"./index-DzzVjFRl.js";import"./radio-group-ao2XUvb9.js";import"./index-D2R9fagv.js";import"./circle-DvhWujGC.js";import"./logo-teamster-DKsO-BHU.js";const es=({questionnaire:i,participant:c})=>{console.log(i,c);const[r,_]=o.useState(i),[h,R]=o.useState(c),[l,f]=o.useState([]),[n,j]=o.useState({}),p=(s,t)=>{j(a=>({...a,[s]:{question_id:s,response:JSON.stringify(t)}}))};o.useEffect(()=>{console.log("Responses:",n)},[n]),console.log("Questionnaire:",i);const y=async s=>{s.preventDefault(),console.log(r);try{const t=await x.post("/api/v1/addresponses",{responses:Object.values(n),questionnaire_id:r,participant_id:h});d({variant:"success",title:"Success!",description:`${t.data.message}`}),C.Inertia.visit("/participant")}catch(t){console.error(t),d({variant:"destructive",title:"Error!",description:`${t.response.data.message}`})}};return o.useEffect(()=>{r&&(async()=>{try{const t=await x.post("/api/v1/getquestions",{questionnaire_id:r});f(t.data.questions),console.log(t.data.questions)}catch(t){console.error(t),d({variant:"destructive",title:"Error!",description:`${t.response.data.message}`})}})()},[r]),e.jsx("div",{children:e.jsxs(w,{sidebar:e.jsx("div",{}),children:[e.jsx(g,{title:"Add Response"}),e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 pt-12",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h1",{className:"text-3xl font-bold text-black",children:"Formulário de Feedback"}),e.jsxs("div",{className:"my-6 flex flex-col justify-between",children:[e.jsx("h2",{className:"text-2xl font-serif uppercase",children:"Está na hora de responderes ao Formulário de Feedback"}),e.jsx("p",{className:"text-gray-500",children:"Por favor, responde com sinceridade e honestidade a todas as questões."}),l&&l.sort((s,t)=>t.is_mandatory-s.is_mandatory).map((s,t)=>e.jsxs("div",{className:"my-4 bg-white p-4 min-h-fit rounded-xl gap-4 flex flex-col shadow-lg",children:[s.type==="text"&&e.jsx(v,{id:s.id,item:s,options:s.options,showButtons:!1,onInputChange:p}),s.type==="checkbox"&&e.jsx(b,{id:s.id,item:s,options:s.options,showButtons:!1,onInputChange:a=>p(s.id,a?"1":"0")}),s.type==="radio"&&e.jsx(N,{id:s.id,item:s,options:Array.isArray(s.options)?s.options:[s.options],showButtons:!1,onInputChange:a=>{const m=(Array.isArray(JSON.parse(s.options))?JSON.parse(s.options):[JSON.parse(s.options)]).find(u=>u.id===a);p(s.id,{id:m.id,label:m.label})}})]},t))]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(S,{onClick:y,children:"Submeter Respostas"})})]})})})]})})};export{es as default};
