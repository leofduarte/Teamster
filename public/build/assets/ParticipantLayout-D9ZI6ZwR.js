import{r as a,j as e,a as N}from"./app-DA6yD-bg.js";import{C as X,L as U,E as J,N as K,P as W,T as Y}from"./ParticipantProfileSettings-DPMJgorE.js";import{S as Z,B as A}from"./button-Czat_LeM.js";import{c as ee}from"./utils-Baa09YAL.js";import{I as $}from"./input-BMchtnkz.js";import"./separator-D5br-jdY.js";import"./radio-group-ao2XUvb9.js";import"./index-CNbTJdn3.js";import{L as te}from"./index-DlhB-auK.js";import"./index.es-C4Hz4JyV.js";function se(t,s=[]){let u=[];function c(l,d){const o=a.createContext(d),i=u.length;u=[...u,d];function p(v){const{scope:x,children:h,...f}=v,P=(x==null?void 0:x[t][i])||o,b=a.useMemo(()=>f,Object.values(f));return e.jsx(P.Provider,{value:b,children:h})}function g(v,x){const h=(x==null?void 0:x[t][i])||o,f=a.useContext(h);if(f)return f;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${l}\``)}return p.displayName=l+"Provider",[p,g]}const r=()=>{const l=u.map(d=>a.createContext(d));return function(o){const i=(o==null?void 0:o[t])||l;return a.useMemo(()=>({[`__scope${t}`]:{...o,[t]:i}}),[o,i])}};return r.scopeName=t,[c,ae(r,...s)]}function ae(...t){const s=t[0];if(t.length===1)return s;const u=()=>{const c=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(l){const d=c.reduce((o,{useScope:i,scopeName:p})=>{const v=i(l)[`__scope${p}`];return{...o,...v}},{});return a.useMemo(()=>({[`__scope${s.scopeName}`]:d}),[d])}};return u.scopeName=s.scopeName,u}var re=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],L=re.reduce((t,s)=>{const u=a.forwardRef((c,r)=>{const{asChild:l,...d}=c,o=l?Z:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...d,ref:r})});return u.displayName=`Primitive.${s}`,{...t,[s]:u}},{}),I="Progress",_=100,[oe,Ce]=se(I),[ne,le]=oe(I),M=a.forwardRef((t,s)=>{const{__scopeProgress:u,value:c=null,max:r,getValueLabel:l=ie,...d}=t;(r||r===0)&&!D(r)&&console.error(ce(`${r}`,"Progress"));const o=D(r)?r:_;c!==null&&!F(c,o)&&console.error(de(`${c}`,"Progress"));const i=F(c,o)?c:null,p=C(i)?l(i,o):void 0;return e.jsx(ne,{scope:u,value:i,max:o,children:e.jsx(L.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":C(i)?i:void 0,"aria-valuetext":p,role:"progressbar","data-state":V(i,o),"data-value":i??void 0,"data-max":o,...d,ref:s})})});M.displayName=I;var R="ProgressIndicator",k=a.forwardRef((t,s)=>{const{__scopeProgress:u,...c}=t,r=le(R,u);return e.jsx(L.div,{"data-state":V(r.value,r.max),"data-value":r.value??void 0,"data-max":r.max,...c,ref:s})});k.displayName=R;function ie(t,s){return`${Math.round(t/s*100)}%`}function V(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function C(t){return typeof t=="number"}function D(t){return C(t)&&!isNaN(t)&&t>0}function F(t,s){return C(t)&&!isNaN(t)&&t<=s&&t>=0}function ce(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${_}\`.`}function de(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${_} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var B=M,ue=k;const O=a.forwardRef(({className:t,value:s,...u},c)=>e.jsx(B,{ref:c,className:ee("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...u,children:e.jsx(ue,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));O.displayName=B.displayName;const me="/build/assets/nivel-1-DhEBqt3P.jpeg";function fe(){const[t,s]=a.useState(1),[u,c]=a.useState(0),[r,l]=a.useState(0);return a.useEffect(()=>((()=>{const o={level:1,progress:40,medals:2};s(o.level),c(o.progress),l(o.medals)})(),()=>{console.log("Componente Level desmontado.")}),[]),e.jsxs("div",{className:"p-8 bg-white drop-shadow-md rounded-lg flex flex-col col-span-2 items-center joyride-level",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4 font-serif text-center",children:"Bem Vindo ao Teamster! "}),e.jsx("div",{className:"w-full max-w-sm h-72 bg-gray-200 mb-6 overflow-hidden rounded-lg",children:e.jsx("img",{src:me,alt:`Nível ${t}`,className:"w-full h-full object-cover"})}),e.jsx("div",{className:"w-full max-w-md mb-4",children:e.jsx(O,{className:"w-full border border-black",value:u})}),e.jsxs("p",{className:"text-lg font-medium",children:["Tens ",r," Medalhas!"]})]})}function pe({participant:t,setIsEditingProfile:s,isEditingProfile:u}){const[c,r]=a.useState(!1),[l,d]=a.useState(t),[o,i]=a.useState(!1),p=()=>{r(!1)},g=()=>{r(!1),console.log("Conta eliminada")},v=()=>{console.log("Alterações guardadas:",l),i(!0),setTimeout(()=>{i(!1)},3e3)},x=()=>{s(!1),console.log("Alterações descartadas.")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-8 bg-white drop-shadow-md rounded-lg flex flex-col items-center",children:[e.jsx("div",{className:"relative",children:e.jsx("img",{className:"rounded-full h-20",src:`https://api.dicebear.com/8.x/big-smile/svg?seed=${l.participant.email}`})}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("p",{className:"text-left text-xs mb-2",children:"Nome"}),e.jsx($,{type:"text",placeholder:l.participant.name,className:"w-full",value:l.name,onChange:h=>d({...l,name:h.target.value})})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("p",{className:"text-left text-xs mb-2",children:"E-mail"}),e.jsx($,{type:"email",disabled:!0,placeholder:"Finanças",className:"w-full",value:l.participant.email})]}),e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("p",{className:"text-left text-xs mb-2",children:"Telemóvel"}),e.jsx($,{type:"tel",placeholder:l.participant.phone,className:"w-full",value:l.position,onChange:h=>d({...l,position:h.target.value})})]}),e.jsxs("div",{className:"flex justify-center w-full mb-10",children:[e.jsx(A,{variant:"outline",className:"mr-4",onClick:x,children:"Voltar"}),e.jsx(A,{onClick:v,children:"Guardar Alterações"})]}),o&&e.jsx("div",{className:"text-[#56C496] text-sm mb-4",children:"Alterações guardadas com sucesso!"})]}),c&&e.jsx(X,{logo:"sad",message:"Tem a certeza que deseja eliminar a sua conta?",buttons:!0,onConfirm:g,onCancel:p})]})}function xe(t){const s=t.user_id;console.log("id",s);const[u,c]=a.useState([]),[r,l]=a.useState(!1),[d,o]=a.useState(null),[i,p]=a.useState([]),[g,v]=a.useState([]),[x,h]=a.useState([]),[f,P]=a.useState(null),[b,Q]=a.useState(null),[w,T]=a.useState(null),[q,G]=a.useState([]),z=m=>{T(m),console.log("Equipe selecionada:",m)};return a.useEffect(()=>{(async()=>{try{const n=await N.get(`/api/getQuestionnairesByParticipantId/${s}`);G(n.data),console.log("questionnaires",n.data)}catch(n){console.error("Failed to fetch questionnaires:",n)}})()},[s]),a.useEffect(()=>{(async()=>{try{const n=await N.post(`/api/v1/getparticipantdata/${s}`);o(n.data)}catch(n){console.error("Failed to fetch participant:",n)}})()},[s]),a.useEffect(()=>{(async()=>{try{const n=await N.post(`api/v1/getTeamsByParticipantId/${s}`);p(n.data.teams),n.data.teams.length>0&&T(n.data.teams[0])}catch(n){console.error("Failed to fetch teams:",n)}})()},[s]),a.useEffect(()=>{if(i.length>0){const m=i.map(n=>n.id);v(m),console.log("teamIds",m)}},[i]),a.useEffect(()=>{(async()=>{if(w)try{const n=await N.get(`api/v1/getPlanActivities?teamId=${w.id}`),j=new Date;j.setHours(0,0,0,0);const y=n.data.filter(S=>new Date(S.date)>=j&&S.team_id===w.id),E=y.sort((S,H)=>new Date(S.date)-new Date(H.date));h(y),E.length>0?(P(E[0]),console.log("closestPlanActivity",E[0])):P(null)}catch(n){console.error("Failed to fetch PlanActivities:",n)}})()},[w]),a.useEffect(()=>{(async()=>{if(f)try{const n=await N.get(`api/v1/activities?planActivityId=${f.id}`);c(n.data),console.log("events",n.data);const j=n.data.find(y=>y.plan_activity_id===f.id);Q(j||null),console.log("closestEvent",j)}catch(n){console.error("Failed to fetch events:",n)}})()},[f]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"min-h-screen bg-[#F8F7FC] flex flex-col items-center justify-center p-8 font-poppins ",children:[e.jsxs("div",{className:"w-full max-w-5xl grid grid-cols-1 md:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsx(U,{}),e.jsx(J,{closestEvent:b,closestPlanActivity:f}),e.jsx(K,{closestEvent:b,closestPlanActivity:f})]}),e.jsx("div",{className:"flex flex-col items-center justify-center",children:r?e.jsx(pe,{participant:d,isEditingProfile:r,setIsEditingProfile:l}):e.jsx(fe,{isEditingProfile:r,setIsEditingProfile:l})}),e.jsxs("div",{className:"flex flex-col gap-12",children:[e.jsx(W,{participant:d,isEditingProfile:r,setIsEditingProfile:l}),e.jsx(Y,{teams:i,id:s,onTeamSelect:z})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg drop-shadow-md",children:[e.jsx("h2",{className:"font-serif font-semibold text-2xl text-center",children:"Questionários de Feedback"}),q.map((m,n)=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"font-semibold text-lg",children:m.title}),e.jsx("p",{className:"text-xs",children:m.description})]}),m.answered?e.jsx("p",{children:"Respondido"}):e.jsx(te,{href:`/addresponse/${m.id}/${s}`,children:e.jsx(A,{className:" py-2 px-4",children:"Ir para o Questionário"})})]},n))]})]})})}const Ee=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{pe as E,fe as L,xe as P,Ee as a};
