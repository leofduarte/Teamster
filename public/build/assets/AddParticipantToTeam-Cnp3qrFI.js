import{r as i,j as e,a as h}from"./app-DA6yD-bg.js";import{t as f}from"./use-toast-DSZ2X8Ft.js";import{I as w}from"./input-BMchtnkz.js";import{L as u}from"./label-DJGv7VYA.js";import{B as j}from"./button-Czat_LeM.js";import y from"./GetEmailExcel2_CP-D-MG6nd3.js";import{T as A,a as C,b as S,c as T,C as P}from"./checkbox-DteTE1QY.js";import{F}from"./index.es-C4Hz4JyV.js";import{d as k}from"./index-DTzn02tC.js";import"./utils-Baa09YAL.js";import"./index-BSvPNBtZ.js";import"./xlsx-DG2X6oDA.js";import"./select-8KFRuk-M.js";import"./index-wyKmaqcT.js";import"./index-DjDCE-CF.js";import"./index-D2R9fagv.js";import"./index-DKKbawXw.js";import"./index-DUFVU-Ky.js";import"./Combination-JEORXwyg.js";import"./index-gIoNW1Kd.js";import"./index-DgaNj54m.js";import"./createLucideIcon-TB6UWrdR.js";import"./index-JpmpzNkP.js";import"./index-DzzVjFRl.js";import"./alert-dialog-DPhN9ELP.js";import"./index-0yB0lKw6.js";const ie=({teamId:r,onClose:g})=>{const[s,m]=i.useState([]),[c,d]=i.useState(""),[v,E]=i.useState(!1),[p,x]=i.useState(""),N=()=>{c&&(m([...s,{email:c}]),d(""),x(""))},b=async t=>{t.preventDefault(),console.log("handleAddParticipant triggered");const l={emails:s.map(a=>a.email)};try{let a=[];await h.post(`/api/v1/teams/${r}/addmultipleparticipants`,l).then(o=>{console.log(o.data),a=o.data}),console.log(a),f({variant:"success",title:"Success!",description:`${l.email} has been added to the team.`}),s.forEach(o=>{h.post("/api/v1/invite",{email:o.email,team_id:r}).then(n=>{console.log(n.data)}).catch(n=>{console.error("Error:",n)})})}catch(a){console.error("Error adding participant:",a),x(a.message),f({variant:"destructive",title:"Error!",description:`An error occurred while adding the participant. ${a.response.data.message}`})}finally{m([]),g()}};return i.useEffect(()=>{console.log("teamId",r)},[r]),e.jsx(e.Fragment,{children:e.jsx("div",{className:"p-4 min-h-full",children:e.jsxs("form",{id:"participantForm",onSubmit:b,children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Adicionar Participantes à Equipa"}),e.jsxs("div",{className:"gap-4 flex flex-col",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-row",children:[e.jsx(u,{htmlFor:"name",className:"block text-sm leading-8 font-medium text-gray-700",children:"Emails de Participantes"}),e.jsx(A,{children:e.jsxs(C,{children:[e.jsx(S,{className:"cursor-pointer",children:e.jsx(F,{className:"ms-2",icon:k})}),e.jsx(T,{children:e.jsx("p",{className:"text-sm",children:"Adicione os emails dos participantes que deseja adicionar à equipa."})})]})})]}),e.jsxs("div",{className:"flex flex-row",children:[e.jsx(w,{type:"email",name:"email",id:"email",value:c,variant:"activity",placeholder:"Email",onChange:t=>d(t.target.value)}),e.jsx(j,{variant:"secondary",className:"ms-2",type:"button",onClick:N,children:"Adicionar Email"}),p&&e.jsx("p",{className:"text-red-500 text-sm",children:p})]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4",children:[e.jsx(P,{id:"terms",onCheckedChange:t=>E(t)}),e.jsx(u,{htmlFor:"terms",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Extrair emails de ficheiros .csv/ .xlsx."})]}),v&&e.jsx("div",{className:"mt-4",children:e.jsx(y,{setEmails:m})})]}),s.length>0&&e.jsx("div",{className:"flex flex-row flex-wrap",children:s.map((t,l)=>e.jsx("div",{className:"mt-2 mr-2",children:e.jsx("p",{className:"w-fit rounded-full bg-green-300 px-4 py-2 text-black text-xs",children:t.email})},l))}),e.jsx("div",{className:"flex flex-row justify-end",children:e.jsx(j,{type:"submit",children:"Submeter"})})]})]})})})};export{ie as default};
