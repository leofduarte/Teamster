import{r as e,j as D}from"./app-DA6yD-bg.js";import{_ as C,b as H,$ as y}from"./index-BSvPNBtZ.js";import{a as N,$ as i,b as F}from"./index-wyKmaqcT.js";import{a as L}from"./index-DjDCE-CF.js";import{$ as g,a as k,b as I,c as M}from"./index-DgaNj54m.js";import{$ as A}from"./index-DUFVU-Ky.js";import{c as U}from"./utils-Baa09YAL.js";let h;const O="HoverCard",[S,ae]=L(O,[g]),P=g(),[K,w]=S(O),j=o=>{const{__scopeHoverCard:n,children:r,open:a,defaultOpen:c,onOpenChange:d,openDelay:p=700,closeDelay:$=300}=o,s=P(n),b=e.useRef(0),f=e.useRef(0),m=e.useRef(!1),l=e.useRef(!1),[v=!1,t]=F({prop:a,defaultProp:c,onChange:d}),u=e.useCallback(()=>{clearTimeout(f.current),b.current=window.setTimeout(()=>t(!0),p)},[p,t]),R=e.useCallback(()=>{clearTimeout(b.current),!m.current&&!l.current&&(f.current=window.setTimeout(()=>t(!1),$))},[$,t]),_=e.useCallback(()=>t(!1),[t]);return e.useEffect(()=>()=>{clearTimeout(b.current),clearTimeout(f.current)},[]),e.createElement(K,{scope:n,open:v,onOpenChange:t,onOpen:u,onClose:R,onDismiss:_,hasSelectionRef:m,isPointerDownOnContentRef:l},e.createElement(I,s,r))},z="HoverCardTrigger",B=e.forwardRef((o,n)=>{const{__scopeHoverCard:r,...a}=o,c=w(z,r),d=P(r);return e.createElement(M,C({asChild:!0},d),e.createElement(y.a,C({"data-state":c.open?"open":"closed"},a,{ref:n,onPointerEnter:i(o.onPointerEnter,x(c.onOpen)),onPointerLeave:i(o.onPointerLeave,x(c.onClose)),onFocus:i(o.onFocus,c.onOpen),onBlur:i(o.onBlur,c.onClose),onTouchStart:i(o.onTouchStart,p=>p.preventDefault())})))}),W="HoverCardPortal",[se,G]=S(W,{forceMount:void 0}),E="HoverCardContent",V=e.forwardRef((o,n)=>{const r=G(E,o.__scopeHoverCard),{forceMount:a=r.forceMount,...c}=o,d=w(E,o.__scopeHoverCard);return e.createElement(N,{present:a||d.open},e.createElement(q,C({"data-state":d.open?"open":"closed"},c,{onPointerEnter:i(o.onPointerEnter,x(d.onOpen)),onPointerLeave:i(o.onPointerLeave,x(d.onClose)),ref:n})))}),q=e.forwardRef((o,n)=>{const{__scopeHoverCard:r,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:p,...$}=o,s=w(E,r),b=P(r),f=e.useRef(null),m=H(n,f),[l,v]=e.useState(!1);return e.useEffect(()=>{if(l){const t=document.body;return h=t.style.userSelect||t.style.webkitUserSelect,t.style.userSelect="none",t.style.webkitUserSelect="none",()=>{t.style.userSelect=h,t.style.webkitUserSelect=h}}},[l]),e.useEffect(()=>{if(f.current){const t=()=>{v(!1),s.isPointerDownOnContentRef.current=!1,setTimeout(()=>{var u;((u=document.getSelection())===null||u===void 0?void 0:u.toString())!==""&&(s.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",t),()=>{document.removeEventListener("pointerup",t),s.hasSelectionRef.current=!1,s.isPointerDownOnContentRef.current=!1}}},[s.isPointerDownOnContentRef,s.hasSelectionRef]),e.useEffect(()=>{f.current&&J(f.current).forEach(u=>u.setAttribute("tabindex","-1"))}),e.createElement(A,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:p,onEscapeKeyDown:a,onPointerDownOutside:c,onFocusOutside:i(d,t=>{t.preventDefault()}),onDismiss:s.onDismiss},e.createElement(k,C({},b,$,{onPointerDown:i($.onPointerDown,t=>{t.currentTarget.contains(t.target)&&v(!0),s.hasSelectionRef.current=!1,s.isPointerDownOnContentRef.current=!0}),ref:m,style:{...$.style,userSelect:l?"text":void 0,WebkitUserSelect:l?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})))});function x(o){return n=>n.pointerType==="touch"?void 0:o()}function J(o){const n=[],r=document.createTreeWalker(o,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;r.nextNode();)n.push(r.currentNode);return n}const Q=j,X=B,T=V,de=Q,ie=X,Y=e.forwardRef(({className:o,align:n="center",sideOffset:r=4,...a},c)=>D.jsx(T,{ref:c,align:n,sideOffset:r,className:U("z-50 w-fit rounded-md border bg-popover p-2 text-sm text-center text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o),...a}));Y.displayName=T.displayName;export{de as H,ie as a,Y as b};
