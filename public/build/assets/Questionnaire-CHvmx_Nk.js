import{r as i,j as e,Y as k,a as A}from"./app-DA6yD-bg.js";import{M}from"./index-DK_DB61g.js";import{A as B,a as P,b as O}from"./AddRadioForm-CZ-LwVMG.js";import{B as x}from"./button-Czat_LeM.js";import{t as N}from"./use-toast-DSZ2X8Ft.js";import{I as E}from"./input-BMchtnkz.js";import{Layout as R}from"./Layout-CD6lmAmp.js";import{M as _}from"./Modal-Q1vF_rf7.js";import{T as q,C as D,R as Q}from"./Radio_cp-npa-mGGS.js";import"./index-0yB0lKw6.js";import"./textarea-bNjw3qJ2.js";import"./utils-Baa09YAL.js";import"./index.es-C4Hz4JyV.js";import"./index-DTzn02tC.js";import"./separator-D5br-jdY.js";import"./index-BSvPNBtZ.js";import"./radio-group-ao2XUvb9.js";import"./index-wyKmaqcT.js";import"./index-DjDCE-CF.js";import"./index-D2R9fagv.js";import"./index-gIoNW1Kd.js";import"./index-DKKbawXw.js";import"./circle-DvhWujGC.js";import"./createLucideIcon-TB6UWrdR.js";import"./logo-teamster-DKsO-BHU.js";import"./index-CNbTJdn3.js";import"./transition-CHIl-Fii.js";import"./label-DJGv7VYA.js";import"./checkbox-DteTE1QY.js";import"./index-DUFVU-Ky.js";import"./index-DgaNj54m.js";import"./index-DzzVjFRl.js";const ge=()=>{const[h,n]=i.useState(!1),[r,l]=i.useState(null),[a,d]=i.useState([]),[c,C]=i.useState(null),[f,b]=i.useState(null),[w,j]=i.useState(!1);i.useEffect(()=>{c===null&&b("Please fill out this field.")},[c]);const p=s=>{const{name:t,value:o}=s.target;l(m=>({...m,[t]:o}))},F=s=>{const t=Math.random().toString(36).substr(2,9);l({id:t,type:s,label:"",value:"",placeholder:"",tooltip:"",description:""}),n(!0)},g=s=>{d(t=>t.filter(o=>o.id!==s))},u=s=>{d(t=>{const o=t.findIndex(m=>m.id===s.id);return o!==-1?[...t.slice(0,o),s,...t.slice(o+1)]:t}),n(!1)},v=async s=>{s.preventDefault(),console.log(a),console.log("Form submitted");try{const t=await A.post("/api/v1/addquestions",{items:a,questionnaire_id:c});console.log("Received response",t),N({variant:"success",title:"Success!",description:`${t.data.message}`})}catch(t){(t.response.status===422||t.response.status===400)&&(b("Please fill out the Input."),N({variant:"destructive",title:"Error!",description:`An error occurred while adding the questionnaire. ${f}`})),console.error(t)}},I=()=>{j(!0)};return e.jsx("div",{children:e.jsxs(R,{sidebar:e.jsx("div",{className:"flex items-center justify-center h-screen w-full",children:e.jsx(M,{handleAddItem:F})}),children:[e.jsx(k,{title:"Questionnaire"}),e.jsx("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 pt-12",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h1",{className:"text-3xl font-bold text-black",children:"Formulário de Feedback"}),e.jsxs("div",{className:"my-6 flex flex-col justify-between",children:[e.jsx("h2",{className:"text-2xl font-serif uppercase",children:"Está na hora de analisar resultados"}),e.jsx("p",{className:"text-gray-500",children:"Pergunte aos seus colaboradores o que pensam sobre a atividade"}),r?e.jsxs("form",{onSubmit:v,className:"flex-grow",children:[r.type==="text"&&e.jsx(B,{isModalOpen:h,setIsModalOpen:n,currentItem:r,setCurrentItem:l,handleUpdateItem:u,items:a,setItems:d,handleDeleteItem:g,showButtons:!1}),r.type==="checkbox"&&e.jsx(P,{isModalOpen:h,setIsModalOpen:n,currentItem:r,setCurrentItem:l,handleUpdateItem:u,items:a,setItems:d,handleDeleteItem:g,handleInputChange:p,showButtons:!1}),r.type==="radio"&&e.jsx(O,{isModalOpen:h,setIsModalOpen:n,currentItem:r,setCurrentItem:l,handleUpdateItem:u,items:a,setItems:d,handleDeleteItem:g,showButtons:!1})]}):e.jsx("div",{className:"flex-grow",children:e.jsx("p",{className:"text-gray-500",children:"Click on the buttons at the end to add items to the form"})})]}),e.jsx(_,{show:w,onClose:()=>j(!1),closeable:!1,children:e.jsxs("div",{className:"p-4 min-h-full bg-[#F8F7FC]",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Pré-Visualização do Formulário"}),a&&a.map((s,t)=>e.jsxs("div",{className:"my-4 bg-white p-4 min-h-fit rounded-xl gap-4 flex flex-col shadow-lg",children:[s.type==="text"&&e.jsx(q,{id:s.id,item:s,options:s.options,showButtons:!1,onInputChange:p}),s.type==="checkbox"&&e.jsx(D,{id:s.id,item:s,options:s.options,showButtons:!1,handleUpdateItem:u,onInputChange:o=>p(s.id)}),s.type==="radio"&&e.jsx(Q,{id:s.id,item:s,options:Array.isArray(s.options)?s.options:[s.options],showButtons:!1,onInputChange:o=>{const y=(Array.isArray(JSON.parse(s.options))?JSON.parse(s.options):[JSON.parse(s.options)]).find(S=>S.id===o);p(s.id,{id:y.id,label:y.label})}})]},t)),e.jsx("div",{className:"flex justify-end",children:e.jsx(x,{variant:"destructive",onClick:()=>j(!1),children:"Fechar"})})]})}),a.length>0&&e.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[e.jsx(x,{variant:"outline",onClick:"teste",children:"Voltar"}),e.jsx(x,{variant:"outline",onClick:I,children:"Pré-Visualizar"}),e.jsx(x,{onClick:v,children:"Prosseguir"})]}),e.jsx(E,{variant:"outline",className:" w-1/5",type:"number",label:"Questionnaire ID",onChange:s=>C(s.target.value),value:c}),f&&e.jsx("p",{className:"text-red-500 text-xs italic",children:f})]})})})]})})};export{ge as default};
