import{r as o,j as e,b as D}from"./app-DA6yD-bg.js";import{Layout as _}from"./Layout-CD6lmAmp.js";import{I as x}from"./index-DlhB-auK.js";import{H as G,a as O,b as J}from"./hover-card-t-uHdfgl.js";import{A as u,a as N,b}from"./avatar-CKv6ngF4.js";import{d as T}from"./index-CNbTJdn3.js";import{T as k,a as S,b as E,c as $,C as K}from"./checkbox-DteTE1QY.js";import{c as m}from"./utils-Baa09YAL.js";import{b as Q,B as U}from"./button-Czat_LeM.js";import{c as W}from"./createLucideIcon-TB6UWrdR.js";import{D as X,a as Y,b as Z,c as ee}from"./dropdown-menu-Ctpzr8Gl.js";import{F as C}from"./index.es-C4Hz4JyV.js";import{h as se,o as le,a as ie}from"./index-DTzn02tC.js";import{A as ae,a as te,b as re,c as ce,d as oe,e as ne,f as de,g as xe,h as me}from"./alert-dialog-DPhN9ELP.js";import{M as he}from"./Modal-Q1vF_rf7.js";import je from"./AddParticipantToTeam-Cnp3qrFI.js";import{S as w}from"./separator-D5br-jdY.js";import"./logo-teamster-DKsO-BHU.js";import"./index-BSvPNBtZ.js";import"./index-wyKmaqcT.js";import"./index-DjDCE-CF.js";import"./index-DgaNj54m.js";import"./index-DKKbawXw.js";import"./index-DUFVU-Ky.js";import"./index-gIoNW1Kd.js";import"./index-DzzVjFRl.js";import"./Combination-JEORXwyg.js";import"./chevron-right-DntUEiCU.js";import"./circle-DvhWujGC.js";import"./index-0yB0lKw6.js";import"./index-JpmpzNkP.js";import"./transition-CHIl-Fii.js";import"./use-toast-DSZ2X8Ft.js";import"./input-BMchtnkz.js";import"./label-DJGv7VYA.js";import"./GetEmailExcel2_CP-D-MG6nd3.js";import"./xlsx-DG2X6oDA.js";import"./select-8KFRuk-M.js";import"./index-D2R9fagv.js";/**
 * @license lucide-react v0.379.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=W("Ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),I=({className:i,...l})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:m("mx-auto flex w-full justify-center",i),...l});I.displayName="Pagination";const M=o.forwardRef(({className:i,...l},c)=>e.jsx("ul",{ref:c,className:m("flex flex-row items-center gap-1",i),...l}));M.displayName="PaginationContent";const y=o.forwardRef(({className:i,...l},c)=>e.jsx("li",{ref:c,className:m("",i),...l}));y.displayName="PaginationItem";const q=({className:i,isActive:l,size:c="icon",...n})=>e.jsx("a",{"aria-current":l?"page":void 0,className:m(Q({variant:l?"outline":"ghost",size:c}),i),...n});q.displayName="PaginationLink";const L=({className:i,...l})=>e.jsxs("span",{"aria-hidden":!0,className:m("flex h-9 w-9 items-center justify-center",i),...l,children:[e.jsx(fe,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});L.displayName="PaginationEllipsis";const ls=({team:i,participants:l,countStatus3:c,questionnaires:n,userQuestionnaires:f,activities:F})=>{const[R,p]=o.useState(null),[z,g]=o.useState(!1),[r,h]=o.useState([]),[d,H]=o.useState(!1),[j,pe]=o.useState(F.map(s=>s.activities));function B(s){r.includes(s)?h(r.filter(a=>a!==s)):h([...r,s])}function V(){r.forEach(s=>{P(i.id,s)}),h([])}console.log("team",i),console.log("participants:",l),console.log("questionnaires:",n),console.log("userQuestionnaires:",f),console.log(j),j.forEach(s=>{console.log(s.activities)});const A=l.data?Object.values(l.data):l;console.log(A);function P(s,a){axios.delete(`/api/v1/team/${s}/participant/${a}`).then(t=>{console.log(t.data)}).catch(t=>{console.error(t)})}return e.jsx(_,{children:e.jsxs("div",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8 pt-12",children:[e.jsx("div",{className:"overflow-hidden",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsx("h1",{className:"text-3xl font-bold text-black",children:i.name}),e.jsxs("div",{className:"my-6 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h2",{className:"text-2xl font-serif uppercase items-end flex",children:"Gerir Equipa"}),e.jsx(U,{onClick:()=>g(!0),children:"Adicionar Membros"})]}),e.jsxs("div",{className:"my-4 bg-white p-4 min-h-fit rounded-md gap-4 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Membros"}),e.jsx(k,{children:e.jsxs(S,{children:[e.jsx(E,{children:e.jsxs("span",{className:"text-md font-bold text-emerald-500",children:[" (",l.total,")"]})}),e.jsx($,{children:e.jsx("p",{children:"Total de membros"})})]})}),e.jsx(k,{children:e.jsxs(S,{children:[e.jsx(E,{children:e.jsxs("span",{className:"text-md font-bold text-yellow-500",children:["(",c,")"]})}),e.jsx($,{children:e.jsx("p",{children:"Convites pendentes"})})]})})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[d&&e.jsx("button",{className:"flex align-middle",onClick:V,children:e.jsx(C,{icon:se,className:"text-red-500"})}),e.jsx("button",{onClick:()=>{d&&r.length>0&&h([]),H(!d)},children:d?"Cancelar":"Selecionar"})]})]}),e.jsx(w,{orientation:"horizontal"}),e.jsxs("div",{className:"gap-2",children:[r.length!==0&&d&&e.jsx("div",{className:"flex gap-4 items-center",children:e.jsxs("p",{children:[r.length," Selected"]})}),A.map((s,a)=>e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 align-middle",children:[d&&e.jsx(K,{className:"items-center flex align-middle",checked:r.includes(s.id),onCheckedChange:()=>{B(s.id),console.log("checked:",r)}}),e.jsxs("div",{className:"flex gap-2",children:[s.pivot.status_id===3?e.jsxs(G,{children:[e.jsx(O,{children:e.jsxs(u,{className:"h-12 w-12",children:[e.jsx(N,{className:"filter grayscale",src:`https://api.dicebear.com/8.x/big-smile/svg?seed=${s.email}`}),e.jsx(b,{children:"CN"})]})}),e.jsx(J,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(u,{className:"h-12 w-12",children:[e.jsx(N,{src:`https://api.dicebear.com/8.x/big-smile/svg?seed=${s.email}`}),e.jsx(b,{children:"CN"})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{children:s.email}),e.jsx("p",{className:"text-sm text-gray-500",children:"Convite pendente"})]})]})})]}):e.jsxs(u,{className:"h-12 w-12",children:[e.jsx(N,{src:`https://api.dicebear.com/8.x/big-smile/svg?seed=${s.email}`}),e.jsx(b,{children:"CN"})]}),s.name?e.jsxs("div",{className:"flex align-middle flex-col leading-tight place-content-center",children:[e.jsx("p",{className:"font-semibold",children:s.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email})]}):e.jsx("p",{className:"flex items-center font-semibold place-content-center",children:s.email})]})]}),e.jsxs(X,{children:[e.jsx(Y,{children:e.jsx(C,{icon:le,className:"px-2 focus-visible:ring-0"})}),e.jsx(Z,{onCloseAutoFocus:t=>t.preventDefault(),children:e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,className:"hover:text-red-100",children:e.jsx(ee,{onSelect:t=>t.preventDefault(),onClick:()=>p(s.id),className:"text-red-500",children:"Eliminar"})}),e.jsxs(re,{children:[e.jsxs(ce,{children:[e.jsx(oe,{children:"Por favor confirme!"}),e.jsx(ne,{children:"Tem a certeza que deseja eliminar este participante?"})]}),e.jsxs(de,{children:[e.jsx(xe,{variant:"outline",onClick:()=>p(null),children:"Cancelar"}),e.jsx(me,{variant:"destructive",onClick:()=>{P(i.id,R),p(null),T.Inertia.reload()},children:"Confirmar"})]})]})]})})]})]},a)),l.last_page>1&&e.jsx(I,{children:e.jsx(M,{children:(l.links||[]).map((s,a)=>{if(s&&s.url){let t=s.label;return s.label==="&laquo; Previous"?t="Previous":s.label==="Next &raquo;"&&(t="Next"),e.jsx(y,{children:e.jsx(q,{href:"#",onClick:v=>{v.preventDefault(),T.Inertia.visit(s.url)},isActive:s.active,children:t})},a)}else return e.jsx(y,{children:e.jsx(L,{})},a)})})})]})]}),e.jsx("div",{className:"my-4 bg-white p-4 min-h-fit rounded-md gap-4 flex flex-col",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Atividades"}),e.jsx(w,{orientation:"horizontal"}),j.length===null?e.jsx("div",{className:"flex flex-col gap-2",children:j.map((s,a)=>e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"leading-tight",children:[e.jsx("h3",{className:"font-bold",children:s.name}),e.jsx("p",{className:"text-xs",children:s.date})]}),s.activities.map((t,v)=>e.jsxs("div",{className:"flex",children:[e.jsx("p",{className:"text-red-500",children:t.id}),e.jsx(x,{href:`/atividade/detalhes/${t.id}`,className:"text-blue-600 hover:text-blue-800 mr-2",children:"See"}),e.jsx(x,{href:`/atividade/${t.id}/pdf`,method:"get",as:"button",children:e.jsx(C,{icon:ie,className:"text-2xl"})})]},v))]})},a))}):e.jsxs("div",{children:[e.jsx("p",{children:"Não tem atividades relacionadas com esta equipa."}),e.jsx(D,{href:"/atividade",className:"text-blue-500 hover:underline",children:"Crie aqui uma atividade."})]})]})}),e.jsx("div",{className:"my-4 bg-white p-4 min-h-fit rounded-md gap-4 flex flex-col",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h3",{className:"text-2xl font-bold",children:"Questionários"}),e.jsx(w,{orientation:"horizontal"}),n||f?e.jsxs("div",{className:"flex flex-col gap-2",children:[n.map((s,a)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h3",{className:"font-bold",children:s.title}),e.jsxs("div",{children:[e.jsx(x,{href:`/questionnaires/${s.id}/edit`,className:"text-blue-600 hover:text-blue-800 mr-2",children:"Edit"}),e.jsx(x,{href:`/teams/${i.id}/questionnaires/${s.id}`,method:"delete",as:"button",className:"text-red-600 hover:text-red-800",children:"Remove"})]})]}),e.jsx("p",{children:s.description})]},a)),e.jsx("div",{className:"flex flex-col gap-4 ",children:f.filter(s=>!n.some(a=>a.id===s.id)).map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:s.title}),e.jsx("p",{className:"text-sm",children:s.description})]}),e.jsx(x,{href:`/teams/${i.id}/questionnaires/${s.id}`,method:"post",as:"button",className:"bg-primary text-primary-foreground hover:bg-primary/90 text-sm text-white p-2 rounded-md",children:"Associar às Equipa"})]},a))})]}):e.jsxs("div",{children:[e.jsx("p",{children:"Não tem questonários relacionados com esta equipa."}),e.jsx(D,{href:"/feedback",className:"text-blue-500 hover:underline",children:"Crie aqui um questionário."})]})]})})]})]})}),e.jsx(he,{show:z,onClose:()=>g(!1),children:e.jsx(je,{teamId:i.id,onClose:()=>g(!1)})})]})})};export{ls as default};
